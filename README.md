# 동시성 제어 분석 보고서

## 동시성 제어 방식 비교

| 기법                 | 설명                                                         | 장점                                                         | 단점                                                         |
|----------------------|--------------------------------------------------------------|--------------------------------------------------------------|--------------------------------------------------------------|
| **ConcurrentHashMap** | 멀티스레드 환경에서 동시 읽기 및 쓰기를 효율적으로 처리하는 **맵(Map)** 자료구조. **세분화된 락**을 사용하여 성능 향상. | - 성능 우수 (세분화된 락 사용)<br>- 높은 동시성 지원<br>- 여러 스레드가 동시에 다른 키에 접근 가능 | - 메모리 누수 (ReentrantLock 인스턴스가 제거되지 않음)<br>- 유지보수 어려움 |
| **ReentrantLock**     | 명시적 락을 제공하는 클래스. 공정 모드를 사용하여 락을 대기 순서대로 할당.                    | - 공정 모드(Fair Mode) 사용 가능<br>- 명시적 락 해제로 동기화가 명확 | - 성능 저하 (락 획득 과정에서 오버헤드)<br>- 데드락 위험 |
| **BlockingQueue**     | 대기 큐로, **빈 큐에서 데이터를 가져가거나 꽉 찬 큐에 데이터를 삽입할 때** 자동으로 대기 시킴.     | - 자동 동기화 제공<br>- 스레드 대기 및 알림을 통해 동기화 자동 처리<br>- Producer-Consumer 문제 해결 | - 성능 저하 (대기와 알림에 따른 오버헤드)<br>- 큐의 상태 관리가 복잡 |
| **Synchronized**      | 하나의 스레드만 특정 메서드 또는 블록을 실행하도록 동기화.                                          | - 간단한 구현<br>- 경쟁 상태 방지 보장                               | - 성능 저하 (동기화 블록 접근 시 대기)<br>- 데드락 위험               |

---

## 선택한 동시성 제어 기법 및 근거

### **ConcurrentHashMap과 ReentrantLock을 선택했는가?**

1. **성능 최적화**: `ConcurrentHashMap`은 **세분화된 락**을 사용하여 **높은 동시성**을 제공하며, 여러 스레드가 동시에 다른 키를 수정할 수 있습니다. 또한, **성능**을 고려하여 **ReentrantLock의 공정 모드**를 사용함으로써 스레드 간의 대기 순서를 관리할 수 있습니다.
2. **동시성 문제 해결**: 과제에서 요구하는 **동시 포인트 충전 및 사용**은 **다양한 스레드**가 동시에 포인트를 수정하는 환경입니다. 따라서 **데이터 일관성**을 유지하면서도 **성능을 고려한 동시성 제어**가 필요했습니다.
3. **단순하고 효율적인 구현**: `BlockingQueue`나 `Synchronized` 방식은 **불필요한 복잡성**을 증가시킬 수 있으며, **성능 저하**가 발생할 가능성이 있습니다. `ConcurrentHashMap`과 `ReentrantLock`을 사용하여 **간단하고 효율적인 동시성 제어**를 구현할 수 있었습니다.

### **향후 개선 사항**

- **메모리 누수** 문제 해결: `ConcurrentHashMap`에서 **ReentrantLock 객체가 제거되지 않는 문제**를 해결하기 위해, **주기적인 청소 작업**을 도입하는 방법이나, **동시성 제어를 위한 다른 자료구조**를 고려할 수 있습니다.
- **동시성 분석 강화**: 실제 프로덕션 환경에서는 **다양한 스레드의 작업**을 더 정확하게 **모니터링**하고, **성능 분석**을 통해 추가적인 최적화 방법을 모색할 수 있습니다.
